<div class="main-container">
  <div class="row">
      <div class="col-md-12 col-12">
          <div class="card">
              <div class="card-header card-header-primary">
                  <h5 class="card-title">
                      <a (click)="goBack()"
                          class="{{iconService.fa_icons.back}}"></a>&nbsp;&nbsp;{{titleService.titles.admin_add_task}}
                  </h5>
              </div>
              <div class="card-body">
                <form [formGroup]="createTask"(ngSubmit)="createTaskSubmit()" autocomplete="off">
                  <div class="row">
                      <div class="col-md-12 col-12">
                          <mat-form-field class="example-full-width">
                              <input type="text" matInput placeholder="Task Title" formControlName="task_title" value="" required>
                              <mat-error *ngIf="!createTask.controls['task_title'].valid && createTask.controls['task_title'].touched">
                                  Task title is required</mat-error>
                          </mat-form-field>
                      </div>
                      <div class="col-md-12 col-12">
                        <mat-form-field>
                          <mat-label>
                            Project
                          </mat-label>
                          <input formControlName="project_id" matInput type="text" [matAutocomplete]="auto" />
                          <mat-autocomplete #auto="matAutocomplete" multiple>
                            <mat-option *ngFor="let item of filteredOptions" [value]="item.project_id">
                              {{item.project_title}}
                            </mat-option>
                          </mat-autocomplete>
                        </mat-form-field>
                        <!-- <mat-form-field class="example-full-width">
                          <input type="text"
                                 placeholder="Search for a project"
                                 matInput
                                formControlName='project_id'
                                 [matAutocomplete]="auto">
                          <mat-autocomplete #auto="matAutocomplete">
                            <mat-option *ngFor="let option of filteredOptions | async" [value]="option">
                              {{option}}
                            </mat-option>
                          </mat-autocomplete>
                        </mat-form-field> -->
                    </div>
                    <div class="col-md-12 col-12">
                      <mat-form-field class="example-full-width">
                          <!-- <input type="text" matInput placeholder="Description" formControlName="description" value="" required> -->
                          <textarea matInput placeholder="Description" formControlName="description" value="" required></textarea>
                          <mat-error *ngIf="!createTask.controls['description'].valid && createTask.controls['description'].touched">
                              Description is required</mat-error>
                      </mat-form-field>
                  </div>
                  <div class="col-md-6 col-12">
                    <mat-form-field>
                      <mat-label>Select user</mat-label>
                      <mat-select formControlName="user_id" multiple>
                        <mat-option *ngFor="let user of allUsers" [value]="user.user_id">
                          {{user.first_name}}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                </div>
                  <div class="col-md-6 col-12">
                    <mat-form-field class="example-full-width">
                      <mat-select placeholder="Select task priority"  formControlName="task_priority" required >
                        <mat-option *ngFor="let task of taskPriorities" value="{{task.task_priority}}">{{task.task_priority}}</mat-option>
                      </mat-select>
                        <mat-error *ngIf="!createTask.controls['task_priority'].valid && createTask.controls['task_priority'].touched">
                          Task priority required</mat-error>
                    </mat-form-field>
                </div>

                <div class="col-md-6 col-12">
                  <mat-form-field class="example-full-width">
                    <mat-select placeholder="Select Task Interval"  formControlName="task_interval" required >
                      <mat-option *ngFor="let task of intervals" value="{{task.task_interval}}">{{task.task_interval}}</mat-option>
                    </mat-select>
                      <mat-error *ngIf="!createTask.controls['task_interval'].valid && createTask.controls['task_interval'].touched">
                        Task Interval required</mat-error>
                  </mat-form-field>
              </div>
                <div class="col-md-3 col-12">
                  <mat-form-field class="example-full-width">
                    <mat-label>Choose a start date</mat-label>
                    <input matInput [matDatepicker]="picker" formControlName="start_date">
                    <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                    <mat-datepicker #picker></mat-datepicker>
                  </mat-form-field>
                </div>
                <div class="col-md-3 col-12">
                  <mat-form-field class="example-full-width">
                    <mat-label>Choose a end date</mat-label>
                    <input matInput [matDatepicker]="picker1" formControlName="end_date">
                    <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
                    <mat-datepicker #picker1></mat-datepicker>
                  </mat-form-field>
                </div>
                <!-- <div class="col-md-3 col-12" *ngIf="createTask.get('task_interval').value === 'WEEKLY'">
                  <mat-form-field class="example-full-width">
                    <mat-select placeholder="Select Weekdays" formControlName="interval_expression"  required >
                      <mat-option *ngFor="let weekdays of weekDays" value="{{weekdays.day}}">{{weekdays.day}}</mat-option>
                    </mat-select>
                      <mat-error *ngIf="!createTask.controls['interval_expression'].valid && createTask.controls['interval_expression'].touched">
                        Task Interval required</mat-error>
                  </mat-form-field>
                </div> -->
                <!-- <div class="col-md-3 col-12" *ngIf="createTask.get('task_interval').value === 'MONTHLY'">
                  <mat-form-field class="example-full-width">
                    <mat-label>Choose a date</mat-label>
                    <input matInput [matDatepicker]="picker2" formControlName="interval_expression">
                    <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
                    <mat-datepicker #picker2></mat-datepicker>
                  </mat-form-field>
                </div> -->
                <!-- <div class="col-md-3 col-12" *ngIf="createTask.get('task_interval').value === 'DAILY' || createTask.get('task_interval').value === 'WEEKLY' || createTask.get('task_interval').value === 'MONTHLY'">
                  <mat-form-field class="example-full-width">
                    <input type="time" matInput placeholder="Select Time" formControlName="interval_expression">
                 </mat-form-field>
                </div> -->
                <div class="col-md-12">
                        <mat-checkbox formControlName="has_attachment" value="NO">File Attachment</mat-checkbox>
                </div>


                  <div class="col-md-6 col-12"  *ngIf="createTask.get('has_attachment').value === true">
                      <input type="file"  (change)="onImagePicked($event)" accept=".pdf, .doc, .docx, .text, .excel, .jpg, .jpeg, .bmp, .png, .eps, .gif, .tif, .tiff">
                  </div>
                </div>
                  <div class="row mt-5">
                      <div class="col-md-12 col-12">
                          <button mat-raised-button class="btn-cancel" (click)="goBack()">Cancel</button>
                          <button class="pull-right btn-submit" [disabled]="createTask.invalid" mat-raised-button>Submit</button>
                      </div>
                  </div>
              </form>
              </div>
          </div>
      </div>
  </div>
</div>
